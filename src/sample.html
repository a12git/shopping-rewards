import { Directive, ElementRef, HostListener } from '@angular/core';

@Directive({
  selector: '[appKeyBoardRestrict]'
})
export class KeyBoardRestrictDirective {
  @HostListener('keypress', ['$event']) onKeyDown(event: KeyboardEvent) {
    this.checkElementInfo(event);
  }
  constructor(private elementRef: ElementRef) {
    console.log(this.elementRef.nativeElement);
  }

  checkElementInfo(event: KeyboardEvent) {
    var inp = String.fromCharCode(event.keyCode);
    if(inp.trim() === '' ) {
      if(!this.elementRef.nativeElement.value || this.elementRef.nativeElement.value.trim() === '') {
        event.preventDefault();
        return false;
      }
      return true;
    } else {
      if (/[a-zA-Z0-9 ]/.test(inp)) {
        return true;
      } else {
        event.preventDefault();
        return false;
      }
    }
    
  }

}
